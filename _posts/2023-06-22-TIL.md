---
layout: post
title: "TIL #1 [JAVA] Static í‚¤ì›Œë“œì— ëŒ€í•´"
date: 2023-06-22
categories:
  - "TIL"
tags:
  - JAVA
  - JVM
image:
  path: https://media.geeksforgeeks.org/wp-content/uploads/20190614230114/JVM-Architecture-diagram.jpg
  thumbnail: https://media.geeksforgeeks.org/wp-content/uploads/20190614230114/JVM-Architecture-diagram.jpg
author: NOWIL
---

# ê³„ê¸°

ìŠ¤í”„ë§ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ì„ì‹œ ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„í• ë•Œ, MySQLê³¼ ê°™ì€ ë°ì´í„°ë² ì´ìŠ¤ ì„œë²„ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì„ì‹œë¡œ ì¸ë©”ëª¨ë¦¬ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ êµ¬í˜„í•˜ì˜€ë‹¤. ì´ë•Œ, Database í´ë˜ìŠ¤ì˜ ë§´ë²„ ë³€ìˆ˜ë¡œ ì—”í‹°í‹° ë¦¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•  ë•Œ static í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ì˜ˆì œë¥¼ ë³´ê³  static í‚¤ì›Œë“œì˜ ì˜ë¯¸ì™€ ì–¸ì œ ì‚¬ìš©í•´ì•¼ í•˜ëŠ”ì§€ ì •ë¦¬í•˜ì˜€ë‹¤.

## ì‘ì„±í•œ ì„ì‹œ ë°ì´í„°ë² ì´ìŠ¤

```java
public class ItemDB {

    private final Map<Integer, Item> itemMap;

    public ItemDB() {
        this.itemMap = new HashMap<>();
        this.itemMap.put(1, new Item(1,"ë¬´í•œì˜ ëŒ€ê²€", 3));
        this.itemMap.put(2, new Item(2,"BF ëŒ€ê²€", 2));
        this.itemMap.put(3, new Item(3,"ë¡±ì†Œë“œ", 1));
        this.itemMap.put(4, new Item(4,"ë„ë€ì˜ ê²€", 1));
    }
    ...
}
```

í”„ë¡œì íŠ¸ì—ì„œ êµ¬í˜„í•œ ì„ì‹œ ì•„ì´í…œ ë°ì´í„°ë² ì´ìŠ¤ëŠ” ìœ„ì™€ ê°™ì€ ì½”ë“œë¡œ ë˜ì–´ ìˆë‹¤. ë‹¤ë¥¸ ë¶€ë¶„ë³´ë‹¤ ì£¼ì˜ ê¹Šê²Œ ë´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ `private final Map<Integer, Item> itemMap;` ë¶€ë¶„ì´ë‹¤. ìš°ë¦¬ëŠ” `itemMap` ë¼ëŠ” `HashMap<Integer, Item>` íƒ€ì…ìœ¼ë¡œ êµ¬í˜„í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  ì´ ë¦¬ìŠ¤íŠ¸ì— ê°ê°ì˜ ì•„ì´í…œì„ ì €ì¥í•˜ì˜€ë‹¤.

## ì˜ˆì œ ë°ì´í„°ë² ì´ìŠ¤

```java
public class MenuInMemoryDatabase {

    private static final Map<Integer, Menu> menuMap = new HashMap<>();
    private MenuInMemoryDatabase() {}
    ...
}
```

ê·¸ë¦¬ê³  ë‚´ê°€ ë³¸ ì˜ˆì œ ë°ì´í„°ë² ì´ìŠ¤ì´ë‹¤. ì´ ì˜ˆì œì—ì„œëŠ” `MenuInMemoryDatabase` í´ë˜ìŠ¤ì˜ ë§´ë²„ ë³€ìˆ˜ì¸ `menuMap`ì— `static` í‚¤ì›Œë“œê°€ ë“¤ì–´ê°„ê±¸ ë³¼ ìˆ˜ ìˆë‹¤. ì´ ë‘˜ì€ ì–´ë–¤ ì°¨ì´ê°€ ìˆëŠ”ì§€ ì•Œì•„ë³´ì•˜ë‹¤.

# `Static` í‚¤ì›Œë“œ

ìš°ë¦¬ëŠ” ëŒ€ë¶€ë¶„ `Static` í‚¤ì›Œë“œë¥¼ í´ë˜ìŠ¤ì˜ ì¼ë¶€ ë³€ìˆ˜ë¥¼ ì •ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤.(ê°’ì´ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ìƒìˆ˜ë¡œ ì‚¬ìš©í•˜ê¸¸ ë°”ë€ë‹¤ë©´ static í‚¤ì›Œë“œì™€ final í‚¤ì›Œë“œë¥¼ ê°™ì´ ì‚¬ìš©í•œë‹¤.)

> ì •ì ë³€ìˆ˜ : ë©”ëª¨ë¦¬ í• ë‹¹ì„ í•œë²ˆë§Œ í• ë‹¹ë˜ì–´ í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œë ë•Œ í—¤ì œë˜ëŠ” ë³€ìˆ˜

ìœ„ì™€ ê°™ì´ ì •ì  ë³€ìˆ˜ì˜ ì •ì˜ë¥¼ ë³´ë©´ ì •ì  ë³€ìˆ˜ëŠ” í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ê³  ë©”ëª¨ë¦¬ í• ë‹¹ì— í•œë°˜ë§Œ í• ë‹¹ëœë‹¤. ì •ì  ë³€ìˆ˜ê°€ ì–¸ì œ í• ë‹¹ë˜ëŠ”ì§€ ì•Œê¸° ìœ„í•´ì„œëŠ” JVMì˜ ë™ì‘ ê³¼ì •ì„ ì•Œì•„ë´ì•¼ í•œë‹¤. ìš°ì„  ìë°” í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ ê³¼ì •ì„ ë³´ì.

> 1. ìë°” í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ JVMì€ OSë¡œë¶€í„° ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ë°›ëŠ”ë‹¤.
> 2. ìë°” ì»´íŒŒì¼ëŸ¬(javac)ê°€ ìë°” ì†ŒìŠ¤ì½”ë“œ(.java)ë¥¼ ìë°” ë°”ì´íŠ¸ ì½”ë“œ(.class)ë¡œ ì»´íŒŒì¼ í•œë‹¤.
> 3. Class LoaderëŠ” ë™ì  ë¡œë”©ì„ í†µí•´ í•„ìš”í•œ í´ë˜ìŠ¤ë“¤ì„ ë¡œë”© ë° ë§í¬ í•˜ì—¬ Runtime Data Area(ì‹¤ì§ˆì ì¸ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹ ë°›ì•„ ê´€ë¦¬í•˜ëŠ” ì˜ì—­)ì— ì˜¬ë¦°ë‹¤.
> 4. Runtime Data Areaì— ë¡œë”© ëœ ë°”ì´íŠ¸ ì½”ë“œëŠ” Execution Engineì„ í†µí•´ í•´ì„ëœë‹¤.
> 5. ì´ ê³¼ì •ì—ì„œ Execution Engineì— ì˜í•´ Garbage Collectorì˜ ì‘ë™ê³¼ Thread ë™ê¸°í™”ê°€ ì´ë£¨ì–´ì§„ë‹¤.
>    ![Alt text](/images/TIL/static/image.png)
>    (ì´ë¯¸ì§€ ì¶œì²˜ : https://www.geeksforgeeks.org/jvm-works-jvm-architecture/)

### JVMì˜ ë©”ëª¨ë¦¬ ê³µê°„(Runtime Data Area)

JVMì˜ ë©”ëª¨ë¦¬ ê³µê°„(Runtime Data Area)ì€ í¬ê²Œ Method(Static) ì˜ì—­, Stack ì˜ì—­, Heap ì˜ì—­ìœ¼ë¡œ êµ¬ë¶„ë˜ê³  ë°ì´í„° íƒ€ì…(ìë£Œí˜•)ì— ë”°ë¼ ê° ì˜ì—­ì— ë‚˜ëˆ ì„œ í• ë‹¹ ë˜ê²Œ ëœë‹¤.
![Alt text](/images/TIL/static/image2.png)
(ì¶œì²˜ : https://www.geeksforgeeks.org/jvm-works-jvm-architecture/)

ìœ„ ì´ë¯¸ì§€ì—ì„œ Static ë³€ìˆ˜ëŠ” Method Area(Static Area)ì—ì„œ ì €ì¥ëœë‹¤. Method AreaëŠ” JVMì—ì„œ ì½ì–´ë“¤ì¸ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ì— ëŒ€í•œ ëŸ°íƒ€ì„ ì¶œ, ë©”ì„œë“œì™€ í•„ë“œ, Static ë³€ìˆ˜, ë©”ì„œë“œ ë°”ì´íŠ¸ ì½”ë“œ ë“±ì„ ë³´ê´€í•œë‹¤. ê·¸ë¦¬ê³  **JVM ì‹œì‘ ì‹œ ìƒì„±ë˜ë©° í”„ë¡œê·¸ë¨ ì¢…ë£Œ ì‹œê¹Œì§€ ì‚¬ìš©**ë  ìˆ˜ ìˆë‹¤.(ëª…ì‹œì ìœ¼ë¡œ null ì„ ì–¸ ì‹œ GC ëŒ€ìƒì´ë‹¤.)
ì¦‰, ìœ„ì™€ ê°™ì€ Static ë³€ìˆ˜ì˜ ìƒì„± ì‹œì ìœ¼ë¡œ ì¸í•´ ë‚´ê°€ ì§  ì½”ë“œì™€ ì˜ˆì œê°„ì˜ ì°¨ì´ì ì´ ìˆë˜ ê²ƒì´ë‹¤.

# ì •ë¦¬

`menuMap` ë³€ìˆ˜ì™€ ê°™ì´ `static final` ë¡œ ì •ì  ìƒìˆ˜ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ë©´ í•´ë‹¹ ë³€ìˆ˜ëŠ” JVMì´ ì‹œì‘ ì‹œì— ìƒì„±ëœë‹¤. í•˜ì§€ë§Œ `itemMap` ë³€ìˆ˜ëŠ” í´ë˜ìŠ¤ì— ë‹¨ìˆœíˆ final í‚¤ì›Œë“œë§Œì„ í†µí•´ ìƒìˆ˜ ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  í•´ë‹¹ ë³€ìˆ˜ì˜ ì´ˆê¸°í™”ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ê°€ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— ì˜ì¡´ì„± ì£¼ì…ë˜ëŠ” ì‹œì ì— ì¼ì–´ë‚¬ë‹¤.  
ì´ëŸ¬í•œ ì°¨ì´ì ìœ¼ë¡œ ì¸í•´ `menuMap` ë³€ìˆ˜ëŠ” í•´ë‹¹ í´ë˜ìŠ¤ì˜ ìƒì„±ì ì•ˆì— ë³€ìˆ˜ë¥¼ ì´ˆê¸°í™”í•˜ëŠ” ì½”ë“œë„ ì—†ë‹¤. JVMì´ ì‹œì‘ë˜ë©´ í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ë©´ì„œ `menuMap` ë³€ìˆ˜ë„ ê°™ì´ ì˜¬ë¦¬ê¸° ë•Œë¬¸ì´ë‹¤.

## ì°¸ê³ ìë£Œ

[How JVM Works â€“ JVM Architecture?](https://www.geeksforgeeks.org/jvm-works-jvm-architecture/)  
[JVM ë‚´ë¶€ êµ¬ì¡° & ë©”ëª¨ë¦¬ ì˜ì—­ ğŸ’¯ ì´ì •ë¦¬](https://inpa.tistory.com/entry/JAVA-%E2%98%95-JVM-%EB%82%B4%EB%B6%80-%EA%B5%AC%EC%A1%B0-%EB%A9%94%EB%AA%A8%EB%A6%AC-%EC%98%81%EC%97%AD-%EC%8B%AC%ED%99%94%ED%8E%B8#%EB%A9%94%EC%84%9C%EB%93%9C_%EC%98%81%EC%97%AD_method_area)  
[[JVM Internal] JVM ë©”ëª¨ë¦¬ êµ¬ì¡°](https://12bme.tistory.com/382)  
[#ìë°”ê°€ìƒë¨¸ì‹ , JVM(Java Virtual Machine)ì´ë€ ë¬´ì—‡ì¸ê°€?](https://asfirstalways.tistory.com/158)
